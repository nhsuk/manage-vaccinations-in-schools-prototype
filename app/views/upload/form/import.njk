{% from "govuk/components/file-upload/macro.njk" import govukFileUpload %}

{% extends "_layouts/form.njk" %}

{% set confirmButtonText = __("upload.import.confirm") %}
{% set title = __("upload.import.title", { programme: programme }) %}

{% block form %}
  {{ errorSummary({
    titleText: __("error.title"),
    errorList: errorList(errors)
  }) if errors }}

  {% if programme.type == ProgrammeType.Flu %}
    {% set hintText = __("upload.import.hint", {
      prefix: "These will go to NHS England and GPs. "
    }) %}
  {% elif programme.type == ProgrammeType.HPV %}
    {% set hintText = __("upload.import.hint", {
      prefix: "These will go to NHS England. "
    }) %}
  {% else %}
    {% set hintText = __("upload.import.hint") %}
  {% endif %}

  {{ govukFileUpload({
    id: "import",
    name: "import",
    label: {
      classes: "nhsuk-label--m",
      html: heading({
        caption: programme.name,
        title: title
      })
    },
    hint: {
      text: hintText
    },
    errorMessage: {
      text: errors.import
    } if errors.import
  }) | replace("govuk-", "nhsuk-") }}

  {{ radios({
    formGroup: {
      classes: "app-prototype"
    },
    fieldset: {
      legend: {
        classes: "nhsuk-fieldset__legend--m",
        text: "Select an upload scenario"
      }
    },
    items: [{
      text: "File not in the correct format",
      value: "invalid"
    }, {
      text: "File contains records with validation errors",
      value: "errors"
    }, {
      text: "File contains only previously uploaded records",
      value: "devoid"
    }, {
      text: __("upload.new.check-answers.warning"),
      value: "happy"
    }],
    decorate: "scenario"
  }) }}
{% endblock %}
