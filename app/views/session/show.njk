{% from "session/_navigation.njk" import sessionNavigation with context %}

{% extends "_layouts/default.njk" %}

{% set title = session.location.name %}

{% block beforeContent %}
  {{ breadcrumb({
    items: [{
      text: __("home.show.title"),
      href: "/"
    }],
    text: __("session.list.title"),
    href: "/sessions"
  }) }}
{% endblock %}

{% block content %}
  {{ super() }}

  {{ sessionNavigation({
    session: session,
    view: "show"
  }) }}

  {% set cardDescriptionHtml %}
    {{ summaryList({
      rows: summaryRows(session, {
        type: {},
        location: {},
        school_urn: {},
        programmes: {},
        dates: {},
        consentWindow: {},
        consentUrl: {},
        consentPdf: {},
        patients: {}
      })
    }) }}

    <div class="app-button-group">
      {{ button({
        text: __("session.schedule.title"),
        href: session.uri + "/edit"
      }) if session.status.isUnplanned }}

      {{ button({
        classes: "app-button--secondary",
        text: __("session.edit.title"),
        href: session.uri + "/edit"
      }) if not session.isUnplanned and not session.isClosed }}

      {{ button({
        classes: "app-button--secondary",
        text: __("session.close.title"),
        href: session.uri + "/close"
      }) if session.isCompleted }}
    </div>
  {% endset %}

  {{ card({
    heading: __("session.show.summary"),
    headingClasses: "nhsuk-heading-m",
    descriptionHtml: cardDescriptionHtml
  }) }}
{% endblock %}
