{% from "session/_navigation.njk" import sessionNavigation with context %}

{% extends "_layouts/default.njk" %}

{% set title = session.location.name %}

{% block beforeContent %}
  {{ breadcrumb({
    items: [{
      text: __("home.show.title"),
      href: "/"
    }],
    text: __("session.list.title"),
    href: "/sessions"
  }) }}
{% endblock %}

{% block content %}
  {{ super() }}

  {{ sessionNavigation({
    session: session,
    view: "show"
  }) }}

  {% set cardDescriptionHtml %}
    {{ summaryList({
      rows: summaryRows(session, {
        type: {},
        status: {},
        location: {},
        school_urn: {},
        programmes: {},
        dates: {},
        consentWindow: {},
        consentUrl: {},
        consentPdf: {},
        patients: {}
      })
    }) }}

    {% if not session.isClosed %}
      <div class="app-button-group">
        {{ button({
          classes: "app-button--secondary",
          text: __("session.schedule.title") if session.isUnplanned else __("session.edit.title"),
          href: session.uri + "/edit"
        }) }}

        {{ button({
          classes: "app-button--secondary",
          text: __("session.upload-class-list.title"),
          href: "/uploads/new?type=" + UploadType.School + "&urn=" + session.school.urn
        }) if session.status == SessionStatus.Planned and session.type == SessionType.School }}

        {{ button({
          classes: "app-button--secondary",
          text: __("session.offline.title"),
          href: session.uri + "/offline"
        }) if session.status == SessionStatus.Planned }}

        {{ button({
          classes: "app-button--secondary",
          text: __("session.close.title"),
          href: session.uri + "/close"
        }) if session.isCompleted }}
      </div>
    {% endif %}
  {% endset %}

  {{ card({
    heading: __("session.show.summary"),
    headingClasses: "nhsuk-heading-m",
    descriptionHtml: cardDescriptionHtml
  }) }}
{% endblock %}
