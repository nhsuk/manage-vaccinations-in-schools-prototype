{% extends "_layouts/session.njk" %}

{% set title = session.name %}
{% set heading = title %}
{% set caption = session.formatted.yearGroups %}

{% block content %}
  {{ warningCallout({
    heading: __("consent.title"),
    html: link(session.uri + "/consents", __mf("consent.count", {
      count: session.consents.length
    })) | nhsukMarkdown
  }) if session.consents.length }}

  {% include "session/_session-programme-summary.njk" %}

  {% if not session.isUnplanned %}
    {% include "session/_session-activity-summary.njk" %}
  {% endif %}

  {{ summaryList({
    card: {
      heading: __("session.summary"),
      headingLevel: 3
    },
    rows: summaryRows(session, {
      location: {},
      school_id: {},
      status: {},
      patients: {},
      programmes: {}
    })
  }) }}

  {{ appButtonGroup({
    buttons: [
      {
        classes: "nhsuk-button--secondary",
        text: __("session.schedule.title") if session.isUnplanned else __("session.edit.title"),
        href: session.uri + "/edit"
      },
      {
        classes: "nhsuk-button--secondary",
        text: __("session.close.title"),
        href: session.uri + "/close"
      } if session.isCompleted
    ],
    links: [{
      text: __("session.offline.title"),
      href: session.uri + "/offline"
    }] if session.isPlanned or session.isActive
  }) }}
{% endblock %}
