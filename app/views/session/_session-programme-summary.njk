{% set columnWidth = "fifth" if session.offersAlternativeVaccine else "quarter" %}

{% for programme in session.primaryProgrammes %}
  {{ appHeading({
    title: programme.name,
    summary: __mf("session.tally.eligible.count", {
      count: session.tally(programme.id).eligible
    }),
    level: 3,
    size: "m"
  }) }}
  <div class="nhsuk-grid-row nhsuk-card-group">
    <div class="nhsuk-grid-column-one-{{ columnWidth }} nhsuk-card-group__item">
      {{ appDataCard({
        heading: ConsentOutcome.NoResponse,
        heading: __("session.tally.noResponse.label"),
        headingLevel: 3,
        colour: "grey",
        compact: true,
        data: session.tally(programme.id).noResponse,
        href: session.uri + "/consent?consent=" + ConsentOutcome.NoResponse + "&programme_id=" + programme.id
      }) }}
    </div>
    <div class="nhsuk-grid-column-one-{{ columnWidth }} nhsuk-card-group__item">
      {{ appDataCard({
        heading: __("session.tally.consentGiven.label", {
          vaccineMethod: programme.standardVaccine.method | lower
        }),
        colour: "aqua-green",
        compact: true,
        data: session.tally(programme.id).consentGiven,
        href: session.uri + "/consent?consent=" + ConsentOutcome.Given
      }) }}
    </div>
{% if programme.alternativeVaccine %}
    <div class="nhsuk-grid-column-one-{{ columnWidth }} nhsuk-card-group__item">
      {{ appDataCard({
        heading: __("session.tally.consentGiven.label", {
          vaccineMethod: "gelatine-free injection"
        }),
        colour: "aqua-green",
        compact: true,
        data: session.tally(programme.id).consentGivenForAlternativeOnly,
        href: session.uri + "/consent?consent=" + ConsentOutcome.GivenForAlternativeOnly
      }) }}
    </div>
{% endif %}
    <div class="nhsuk-grid-column-one-{{ columnWidth }} nhsuk-card-group__item">
      {{ appDataCard({
        heading: __("session.tally.didNotConsent.label"),
        headingLevel: 3,
        colour: "red",
        compact: true,
        data: session.tally(programme.id).didNotConsent,
        href: session.uri + "/consent?consent=" + ConsentOutcome.Refused + "&programme_id=" + programme.id
      }) }}
    </div>
    <div class="nhsuk-grid-column-one-{{ columnWidth }} nhsuk-card-group__item">
      {{ appDataCard({
        heading: __("session.tally.vaccinated.label"),
        headingLevel: 3,
        colour: "green",
        compact: true,
        data: session.tally(programme.id).vaccinated,
        href: session.uri + "/report?report=" + PatientOutcome.Vaccinated + "&programme_id=" + programme.id
      }) }}
    </div>
  </div>
{% endfor %}
