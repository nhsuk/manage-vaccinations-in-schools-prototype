{% extends "_layouts/unbranded.njk" %}

{% set title = __("record.list.title") %}

{% block content %}
  {{ super() }}

  {{ heading({
    caption: __("record.list.caption"),
    size: "xl",
    title: title
  }) }}

  {% set recordRows = [] %}
  {% for record in records %}
    {% set recordRows = recordRows | push([
      {
        header: __("record.fullName.label"),
        html: link(record.uri, record.fullName) or "Not provided"
      },
      {
        header: __("record.nhsNumber.label"),
        html: record.formattedNhsNumber or "Not provided"
      },
      {
        header: __("record.dob.label"),
        html: record.dob | govukDate or "Not provided"
      },
      {
        header: __("record.sex.label"),
        html: record.sex or "Not provided"
      }
    ]) %}
  {% endfor %}

  {{ actionTable({
    sort: "full name",
    table: {
      caption: __n("record.count", records.length),
      responsive: true,
      head: [
        { text: __("record.fullName.label") },
        { text: __("record.nhsNumber.label") },
        { text: __("record.dob.label") },
        { text: __("record.sex.label") }
      ],
      rows: recordRows
    }
  }) }}
{% endblock %}
