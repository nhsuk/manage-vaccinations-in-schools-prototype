{% extends "_layouts/default.njk" %}

{% set title = __("move.list.title") %}

{% block content %}
  {{ super() }}

  {{ appHeading({
    size: "xl",
    title: title
  }) }}

  <div class="nhsuk-u-reading-width">
    {{ __("move.list.introduction") | nhsukMarkdown }}

    {{ button({
      classes: "nhsuk-button--secondary",
      text: __("move.download.label"),
      href: "#"
    }) }}
  </div>

  {% set resultRows = [] %}
  {% for move in results.page %}
    {% set tableRow = move.tableRow | push({
      header: __("actions.label"),
      html: appActionList({
        items: [{
          text: __("actions.review"),
          href: move.uri
        }]
      })
    }) %}
    {% set resultRows = resultRows | push(tableRow) %}
  {% endfor %}

  {% if moves.length %}
    {{ table({
      id: "moves",
      heading: __mf("move.count", { count: moves.length }),
      headingLevel: 2,
      panel: true,
      responsive: true,
      head: [
        { text: __("move.createdAt.label") },
        { text: __("child.label") },
        { text: __("move.label") },
        { text: __("actions.label") }
      ],
      rows: resultRows
    }) }}

    {{ govukPagination(pages) }}

    {{ __mf("move.results", {
      from: results.from,
      to: results.to,
      count: results.count
    }) | nhsukMarkdown }}
  {% else %}
    {{ __mf("move.count", { count: 0 }) | nhsukMarkdown }}
  {% endif %}
{% endblock %}
