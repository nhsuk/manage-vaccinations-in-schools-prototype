{% extends "_layouts/default.njk" %}

{% set campaign = data.campaigns[session.campaign_uuid] %}
{% set title = campaign.name + " session at " + session.location.name %}

{% block beforeContent %}
  {{ breadcrumb({
    items: [
      {
        text: "Home",
        href: "/dashboard"
      },
      {
        text: "School sessions",
        href: "/sessions"
      }
    ]
  }) }}
{% endblock %}

{% block content %}
  <div class="nhsuk-u-width-three-quarters">
    {{ super() }}

    {{ heading({
      classes: "nhsuk-u-margin-bottom-2",
      title: title
    }) }}

    <p class="nhsuk-body-l nhsuk-u-secondary-text-color">{{ session.date | govukDate }} ({{ session.time }}) Â· {{ __n("session.cohort.count", session.cohort.length) }}</p>

    {% set cardDescriptionHtml %}
      <h2 class="nhsuk-heading-s nhsuk-u-margin-bottom-1">
        <a href="{{ session.uri }}/consent">
          {{ __("session.activity.consent.title") }}
        </a>
      </h2>
      <p>
        {{ __n("consent.NO_RESPONSE.count", patients | where("consent", "NO_RESPONSE") | length) }}<br>
        {{ __n("consent.GIVEN.count", patients | where("consent", "GIVEN") | length) }}<br>
        {{ __n("consent.REFUSED.count", patients | where("consent", "REFUSED") | length) }}
      </p>

      <h2 class="nhsuk-heading-s">
        <a href="{{ session.uri }}/screen">
          {{ __("session.activity.screen.title") }}
        </a>
      </h2>

      <h2 class="nhsuk-heading-s">
        <a href="{{ session.uri }}/capture">
          {{ __("session.activity.capture.title") }}
        </a>
      </h2>

      <p>
        <a href="{{ session.uri }}/edit">Edit session</a>
      </p>
    {% endset %}

    {{ card({
      heading: "Session tasks",
      headingClasses: "nhsuk-heading-s nhsuk-u-secondary-text-color nhsuk-u-font-weight-normal",
      descriptionHtml: cardDescriptionHtml
    }) }}
  </div>
{% endblock %}
