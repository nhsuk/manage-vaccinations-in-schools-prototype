{% call card({
  classes: "nhsuk-u-margin-top-3",
  feature: true,
  heading: programme.name + ": " + (patientSession.patientProgramme.status | lower),
  headingClasses: "app-card__heading--" + patientSession.patientProgramme.statusColour,
  headingLevel: 3
}) %}
  {# Description #}
  {{ patientSession.reportNotes | nhsukMarkdown }}

  {# Decision table #}
  {% set vaccinationRows = [] %}
  {% for vaccination in patientSession.vaccinationOutcomes | reverse %}
    {% set vaccinationRows = vaccinationRows | push([
      {
        header: __("vaccination.createdAt_date.label"),
        html: vaccination.link.createdAt
      },
      {
        header: __("vaccination.outcome.label"),
        html: vaccination.formatted.outcome
      }
    ]) %}
  {% endfor %}

  {{ table({
    id: "vaccinations",
    caption: __("patientSession.vaccinationOutcomes.label"),
    responsive: true,
    head: [
      { text: __("vaccination.createdAt_date.label") },
      { text: __("vaccination.outcome.label") }
    ],
    rows: vaccinationRows
  }) if patientSession.vaccinationOutcomes | length }}
{% endcall %}
