{% from "_macros/action-list.njk" import actionList %}
{% from "_macros/heading.njk" import heading %}
{% from "_macros/secondary-navigation.njk" import secondaryNavigation %}

{% macro patientSessionNavigation(params) %}
  {{ heading({
    title: params.patientSession.patient.fullName,
    summary: params.patientSession.patient.formatted.yearGroupWithRegistration
  }) }}

  {{ actionList({
    items: [{
      tag: statusTag(params.patientSession.status.register)
    }, {
      text: __("patientSession.registration.title"),
      href: params.patientSession.uri + "/edit/registration"
    } if params.patientSession.register != RegistrationOutcome.Complete, {
      text: __("patientSession.record.title"),
      href: "#"
    } if not params.patientSession.session.isActive and params.patientSession.report != PatientOutcome.Vaccinated]
  }) if params.patientSession.session.isActive }}

  {{ actionList({
    items: [{
      text: __("patientSession.vaccination.title"),
      href: params.patientSession.uri + "/new/vaccination"
    }]
  }) if not params.patientSession.session.isActive and params.patientSession.report != PatientOutcome.Vaccinated }}

  <is-sticky class="app-patient-banner">
    <div class="nhsuk-width-container">
      {{ secondaryNavigation({
        items: navigationItems
      }) if navigationItems }}
    </div>
  </is-sticky>

  <h2 class="nhsuk-heading-m nhsuk-u-visually-hidden">
    {{ __("patientSession." + params.view + ".title") }}
  </h2>
{% endmacro %}
