{% extends "_layouts/form.njk" %}

{% set confirmButtonText = __("vaccination.edit.confirm") %}
{% set paths = { back: vaccination.uri } %}
{% set title = __("vaccination.edit.title") %}

{% block form %}
  {{ super() }}

  {{ heading({
    caption: record.fullName,
    title: title
  }) }}

  {{ card({
    heading: __("vaccination.edit.summary"),
    headingClasses: "nhsuk-heading-m",
    descriptionHtml: summaryList({
      rows: summaryRows(vaccination, {
        outcome: {
          href: vaccination.uri + "/edit/outcome"
        },
        vaccine_gtin: {
          href: vaccination.uri + "/edit/vaccine"
        },
        method: {
          href: vaccination.uri + "/edit/injection" if vaccination.vaccine.method == VaccineMethod.Injection
        },
        site: {
          href: vaccination.uri + "/edit/injection" if vaccination.vaccine.method == VaccineMethod.Injection
        },
        dose: {
          href: vaccination.uri + "/edit/dose"
        },
        sequence: {
          href: vaccination.uri + "/edit/sequence"
        },
        batch_id: {
          href: vaccination.uri + "/edit/batch"
        },
        batch_expires: {
          href: vaccination.uri + "/edit/batch"
        },
        location: {
          href: vaccination.uri + "/edit/location"
        },
        created: {
          href: vaccination.uri + "/edit/created"
        },
        created_user_uid: {
          value: users[vaccination.created_user_uid].fullName,
          href: vaccination.uri + "/edit/created-user-uid"
        },
        protocol: {},
        notes: {
          value: vaccination.notes | nhsukMarkdown,
          href: vaccination.uri + "/edit/notes"
        }
      })
    })
  }) }}
{% endblock %}
