{% extends "_layouts/default.njk" %}

{% set title = vaccination.patient.fullName %}

{% block beforeContent %}
  {{ breadcrumb({
    items: [{
      text: __("home.show.title"),
      href: "/"
    }, {
      text: __("patient.list.title"),
      href: "/patients"
    }, {
      text: vaccination.patient.fullName,
      href: vaccination.patient.uri
    }, {
      text: vaccination.patient.programmes[vaccination.programme_id].programme.name,
      href: vaccination.patient.programmes[vaccination.programme_id].uri
    }]
  }) }}
{% endblock %}

{% block content %}
  <div class="nhsuk-u-width-three-quarters">
    {{ super() }}

    {{ appHeading({
      title: title
    }) }}

    {{ summaryList({
      card: {
        heading: __("patient.label"),
        headingSize: "m",
        actions: {
          items: [
            {
              text: __("patient.edit.title"),
              href: vaccination.patient.uri + "/edit?referrer=" + vaccination.uri
            }
          ]
        }
      },
      rows: summaryRows(vaccination.patient, {
        nhsn: {
          changeLabel: "the childâ€™s NHS number",
          href: vaccination.uri + "/patients/" + vaccination.patient.nhsn + "/edit/nhsn" if vaccination.patient.hasMissingNhsNumber
        },
        fullName: {},
        dobWithAge: {},
        gender: {},
        postalCode: {},
        school: {},
        parents: {}
      })
    }) }}

    {{ summaryList({
      card: {
        heading: __("vaccination.show.summary"),
        headingSize: "m",
        actions: {
          items: [
            {
              text: __("vaccination.edit.title"),
              href: vaccination.uri + "/edit"
            }
          ]
        }
      },
      rows: summaryRows(vaccination, {
        programme: {},
        outcome: {},
        vaccine_snomed: {},
        method: {},
        site: {},
        dose: {},
        sequence: {},
        batch: {},
        identifiedBy: {},
        suppliedBy: {},
        createdBy: {},
        createdAt: {},
        updatedAt: {},
        location: {},
        protocol: {},
        note: {},
        syncStatus: {}
      })
    }) }}
  </div>
{% endblock %}
